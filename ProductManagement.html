



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Library Include: AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
    <title>Product Management</title>
    <!--Credits: HTML: David Uhlmann CSS: Hamlet Baghdasaryan JavaScript: Abel Chacko-->
    <link rel="stylesheet" type="text/css" href = "Css.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<header>
    <nav>
        <ul>
            <li><a href="index.html">Sign Up</a></li>
            <li><a href="ShoppingCart.html">Cart</a></li>
            <li><a href="ProductManagment.html">Product Management</a></li>
            <li><a href="Shipping.html"> Shipping Information</a></li>
        </ul>
    </nav>
    <hr>
    <h1>TBD Proto Corp inc LLC</h1>
</header>
<section>
    <h1>Product Management</h1>
    <br>
    <form>

        <label for="productID">Product ID: </label>
        <br>
        <input type="text" id="productID" name="product ID">
        <br>
        <br>

        <label for="productDescription">Product Description: </label>
        <br>
        <input type="text" id="productDescription" name="product description">
        <br>
        <br>

        <label for="Category" >Product Category: </label>
        <br>
        <select name="subject" id="Category">
            <option value=" " selected="selected">Select Category</option>
            <option value="Software">Software</option>
            <option value="Computer">Computer</option>
            <option value="Laptop">Laptop</option>
            <option value="Cable">Cable</option>
            <option value="Other">Other</option>
        </select>
        <br>
        <br>

        <label for="Measure"> Product Unit of Measure: </label>
        <br>
        <select name="subject" id="Measure">
            <option value=" " selected="selected">Select Unit</option>
            <option value="Pounds">Pounds</option>
            <option value="Grams">Grams</option>
            <option value="Kilograms">Kilograms</option>
            <option value="Other">Other</option>
        </select>
        <br>
        <br>

        <label for="Price">Product Price: </label>
        <br>
        <input type="number" id="Price" name="price" step="0.01" min="0" required>
        <br>
        <br>

        <label for="Weight"> Product Weight: </label>
        <br>
        <input type="number" id="Weight" name="weight" step="0.01" min="0" required>
        <br>
        <br>

        <input type="submit" id="saveButton" value="Save">

        <br>
        <br>
        <label for="searchID" class="form-label">Search via Product ID</label>
        <input type="text" id="searchID" class="form-control" placeholder="enter ID">
        <button id="searchbtn" class="btn btn-primary mt-2">SEARCH</button>

    </form>
    <pre id="Json-Output"></pre>
    <div id="ajaxStatus" class="mt-3"></div>
    <pre id="ajaxResponse" class="bg-light p-3 border rounded"></pre>

</section>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    $(document).ready(function () {
        $("#saveButton").on("click", function (e) {
            e.preventDefault();

            const productID = $.trim($("#productID").val());
            const description = $.trim($("#productDescription").val());
            const category = $.trim($("#Category").val());
            const measure = $.trim($("#Measure").val());
            const price = $.trim($("#Price").val())
            const weight = $.trim($("#Weight").val());
            const output = $("#Json-Output");

            if (!productID || !description || !category || !measure || !price || !weight) {
                alert("Please ensure all fields are filled.");
                return;
            }

            const productIDPattern = /^[0-9]{5}$/;
            if(!productIDPattern.test(productID)){
                alert("Please enter a valid 5-digit ID");
                return;
            }

            const productData = {
                productID: productID,
                description: description,
                category: category,
                measure: measure,
                price: price,
                weight: weight,
            };

            output.text(JSON.stringify(productData, null, 2));
            output.addClass("border border-success p-3");
            localStorage.setItem(productID, JSON.stringify(productData));
            $("#ajaxStatus").removeClass().addClass("alert alert-info").text("Submitting product data...");
            $("#ajaxResponse").text("");
            $.ajax({
                url: "https://httpbin.org/post",
                method: "POST",
                contentType: "application/json",
                data: JSON.stringify(productData)
            }).done(function (resp) {
                $("#ajaxStatus").removeClass().addClass("alert alert-success").text("Product data submitted successfully.");
                try { $("#ajaxResponse").text(JSON.stringify(resp, null, 2)); } catch(e) { $("#ajaxResponse").text(String(resp)); }
            }).fail(function (xhr) {
                const msg = xhr.responseText || (xhr.status + " " + xhr.statusText) || "AJAX request failed.";
                $("#ajaxStatus").removeClass().addClass("alert alert-danger").text(msg);
                if (xhr.responseJSON) { $("#ajaxResponse").text(JSON.stringify(xhr.responseJSON, null, 2)); }
            });
        });

        $("#searchbtn").on("click", function (e){
            e.preventDefault();

            const IDsearch = $.trim($("#searchID").val());
            const output = $("#Json-Output");

            if (!IDsearch) {
                alert("Please enter a valid ID to look up");
                return;
            }

            const findprod = localStorage.getItem(IDsearch);

            if (findprod) {
                const prod = JSON.parse(findprod);

                $("#productID").val(prod.productID);
                $("#productDescription").val(prod.description);
                $("#Category").val(prod.category);
                $("#Measure").val(prod.measure);
                $("#Price").val(prod.price);
                $("#Weight").val(prod.weight);

                output.text(JSON.stringify(prod, null, 2));
                output.addClass("border border-info p-3");
            } else {
                alert("Product does not exist");
                output.text("");
                output.removeClass("border border-info border-success p-3");
            }
        })

    });
</script>

</body>

</html>














