<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ItemReturns</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    
    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="Css.css">
</head>
<body>
<header class="bg-primary text-white p-3">
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">TBD Proto Corp</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Sign Up</a></li>
                    <li class="nav-item"><a class="nav-link" href="ShoppingCart.html">Cart</a></li>
                    <li class="nav-item"><a class="nav-link" href="ProductManagement.html">Product Management</a></li>
                    <li class="nav-item"><a class="nav-link" href="Shipping.html">Shipping Info</a></li>
                    <li class="nav-item"><a class="nav-link" href="BillingDetails.html">Billing Details</a></li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<main class="container my-5">
    <h2>Return Items</h2>
    
    <!-- Return Items Table -->
    <div class="table-responsive my-4">
        <table class="table table-bordered table-striped" id="returnTable">
            <thead class="table-dark">
                <tr>
                    <th>Order Number</th>
                    <th>Product Name</th>
                    <th>Quantity</th>
                    <th>Reason</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Items to return will be dynamically loaded -->
            </tbody>
        </table>
    </div>

    <!-- JSON Display for debugging -->
    <h5>Return Products JSON:</h5>
    <pre id="returnJSON" class="bg-light p-3 border rounded"></pre>

    <div class="mb-3">
        <button id="submitReturn" class="btn btn-success">Submit Return</button>
        <a href="BillingDetails.html" class="btn btn-secondary">Back to Billing</a>
    </div>
</main>

<script>
// Sample JSON of products to return
let returnProducts = [
    {orderNumber: "A1001", productName: "Laptop", quantity: 1, reason: ""},
    {orderNumber: "A1002", productName: "Mouse", quantity: 2, reason: ""}
];

// Load table and JSON display
$(document).ready(function(){
    let tbody = $("#returnTable tbody");

    function refreshTable() {
        tbody.empty();
        returnProducts.forEach((item, index) => {
            tbody.append(`
                <tr>
                    <td>${item.orderNumber}</td>
                    <td>${item.productName}</td>
                    <td>${item.quantity}</td>
                    <td><input type="text" class="form-control reason" data-index="${index}" placeholder="Reason for return"></td>
                    <td><button class="btn btn-danger removeRow" data-index="${index}">Remove</button></td>
                </tr>
            `);
        });

        // Update JSON display
        $("#returnJSON").text(JSON.stringify(returnProducts, null, 4));
    }

    refreshTable();

    // Capture reason changes
    $(document).on("input", ".reason", function(){
        let idx = $(this).data("index");
        returnProducts[idx].reason = $(this).val();
        $("#returnJSON").text(JSON.stringify(returnProducts, null, 4));
    });

    // Remove row
    $(document).on("click", ".removeRow", function(){
        let idx = $(this).data("index");
        returnProducts.splice(idx, 1);
        refreshTable();
    });

    // Submit returns via AJAX (simulated)
    $("#submitReturn").click(function(){
        alert("Return request submitted! Check JSON below and console.");
        console.log("Returning products:", returnProducts);
    });
});
</script>


</body>
</html>
